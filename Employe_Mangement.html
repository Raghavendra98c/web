<!DOCTYPE html>
<html lang="en">

<head>
    <title>Crud Operations</title>
    <style>
        table{
            width: 100%;
        }
        th,td{
            border: 1px solid black;
            padding: 30px;
        }

    </style>
</head>

<body>

    <center>
        <h1>Crud Operations</h1>
    </center>
    <hr>
    <div class="employee-form">
        <form onsubmit="formSubmit()">
            <div>
                <label>Full Name:</label><label class="validation-error hide" id="fullNameValidationError">This field is required.</label>
                <input type="text" name="fullName" id="fullName">
            </div>
            <div>
                <label>Email Id</label>
                <input type="text" name="email" id="email">
            </div>
            <div>
                <label>Salary</label>
                <input type="text" name="salary" id="salary">
            </div>
            <div>
                <label>City</label>
                <input type="text" name="city" id="city">
            </div>
            <div class="form-action-buttons">
                <input type="submit" value="submit">
            </div>
        </form>
    </div>
    <br />
    <div class="employees-table">
        <table class="list" id="employeelist">
            <thead>
                <tr>
                    <th>Full Name:</th>
                    <th>Email Id</th>
                    <th>Salary</th>
                    <th>City</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>


    <script>
var selectedRow=null
        function formSubmit(){
            event.preventDefault()
            let formData=read()
            if(selectedRow == null){
                insert(formData)
            }
            else{
                updataData(formData)
            }
          
            reset()
        }
        function read(){
            var formData={}
            formData["fullName"]=document.getElementById("fullName").value
            formData["email"]=document.getElementById("email").value
            formData["salary"]=document.getElementById("salary").value
            formData["city"]=document.getElementById("city").value
            return formData
        }

        function reset(){
            document.getElementById("fullName").value=""
            document.getElementById("email").value=""
            document.getElementById("salary").value=""
            document.getElementById("city").value=""
        }

        function deleteData(td){
            row=td.parentElement.parentElement
            document.getElementById("employeelist").deleteRow(row.rowIndex)

        } 
        
        function editData(td){
            selectedRow=td.parentElement.parentElement
            document.getElementById("fullName").value=selectedRow.cells[0].innerHTML
            document.getElementById("email").value=selectedRow.cells[1].innerHTML
            document.getElementById("salary").value=selectedRow.cells[2].innerHTML
            document.getElementById("city").value=selectedRow.cells[3].innerHTML

        }

        function updataData(data){
            selectedRow.cells[0].innerHTML=data.fullName
            selectedRow.cells[1].innerHTML=data.email
            selectedRow.cells[2].innerHTML=data.salary
            selectedRow.cells[3].innerHTML=data.city
        }
        function insert(data){
            let table=document.getElementsByTagName("tbody")[0]
            let row=table.insertRow(table.length)

            cell1=row.insertCell(0)
            cell1.innerHTML=data.fullName

            cell2=row.insertCell(1)
            cell2.innerHTML=data.email

            cell3=row.insertCell(2)
            cell3.innerHTML=data.salary

            cell4=row.insertCell(3)
            cell4.innerHTML=data.city

            cell5=row.insertCell(4)
            cell5.innerHTML=`<a onclick="deleteData(this)">Delete</a> <a onclick="editData(this)">Update</a>`


        }






    </script>



</body>

</html>
